{% extends "base.html" %}
{% block content %}

<main class="max-w-4xl mx-auto my-12 px-6">
  <div class="bg-gradient-to-r from-indigo-50 to-white rounded-3xl shadow-2xl overflow-hidden">

    <!-- Header -->
    <div class="bg-indigo-600 text-white p-8 rounded-t-3xl">
      <h2 class="text-4xl font-bold">Edit Album</h2>
      <p class="mt-2 text-indigo-200">Update album details and manage artists</p>
    </div>

    <!-- Form -->
    <form method="POST" class="p-8 flex flex-col gap-6">

      <!-- Album Title -->
      <div class="flex flex-col">
        <label class="font-semibold text-gray-700 mb-2">Title</label>
        <input type="text" name="title" value="{{ album.title }}" 
               class="border border-gray-300 rounded-xl p-4 w-full shadow-sm focus:ring-2 focus:ring-indigo-400 focus:outline-none">
      </div>

      <!-- Description -->
      <div class="flex flex-col">
        <label class="font-semibold text-gray-700 mb-2">Description</label>
        <textarea name="description" rows="5" 
                  class="border border-gray-300 rounded-xl p-4 w-full shadow-sm focus:ring-2 focus:ring-indigo-400 focus:outline-none">{{ album.description }}</textarea>
      </div>

      <!-- Year & Rating -->
      <div class="grid grid-cols-2 gap-6">
        <div class="flex flex-col">
          <label class="font-semibold text-gray-700 mb-2">Release Year</label>
          <input type="number" name="release_year" value="{{ album.release_year }}" 
                 class="border border-gray-300 rounded-xl p-4 shadow-sm focus:ring-2 focus:ring-indigo-400 focus:outline-none">
        </div>
        <div class="flex flex-col">
          <label class="font-semibold text-gray-700 mb-2">Rating</label>
          <input type="number" step="0.1" name="rating" value="{{ album.rating }}" 
                 class="border border-gray-300 rounded-xl p-4 shadow-sm focus:ring-2 focus:ring-yellow-400 focus:outline-none">
        </div>
      </div>

      <!-- Genre -->
      <div class="flex flex-col">
        <label class="font-semibold text-gray-700 mb-2">Genre</label>
        <select name="genre_id" class="border border-gray-300 rounded-xl p-4 w-full shadow-sm focus:ring-2 focus:ring-green-400 focus:outline-none">
          {% for genre in genres %}
            <option value="{{ genre.id }}" {% if genre.id == album.genre_id %}selected{% endif %}>{{ genre.name }}</option>
          {% endfor %}
        </select>
      </div>

      <!-- Artists -->
      <div class="flex flex-col">
        <label class="font-semibold text-gray-700 mb-2">Artists</label>
        <select name="artist_id" class="border border-gray-300 rounded-xl p-4 w-full shadow-sm focus:ring-2 focus:ring-purple-400 focus:outline-none">
          <option value="">Select an artist</option>
          {% for artist in all_artists %}
            <option value="{{ artist.id }}" {% if artist.id == current_artist_id %}selected{% endif %}>
              {{ artist.name }}
            </option>
          {% endfor %}
        </select>
        <p class="text-gray-500 text-sm mt-1">Hold Ctrl (Cmd on Mac) to select multiple artists.</p>
      </div>

      <!-- Image URL -->
      <div class="flex flex-col">
        <label class="font-semibold text-gray-700 mb-2">Image URL</label>
        <input type="text" name="image_url" value="{{ album.image_url }}" 
               class="border border-gray-300 rounded-xl p-4 w-full shadow-sm focus:ring-2 focus:ring-pink-400 focus:outline-none">
      </div>

      <!-- Buttons -->
      <div class="flex justify-end gap-4 mt-4">
        <a href="{{ url_for('album_detail', id=album.id) }}" class="px-6 py-3 bg-gray-200 text-gray-800 rounded-xl hover:bg-gray-300 transition font-semibold shadow">
          Cancel
        </a>
        <button type="submit" class="px-6 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition font-semibold shadow">
          Update Album
        </button>
      </div>

    </form>
  </div>
</main>

{% endblock %}
